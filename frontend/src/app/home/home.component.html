<!DOCTYPE html>
<html lang="en" class="body">
<div class="container">
  <!-- Page Title -->
  <div class="box-1">
    <h1 class="h1">Monthly Time Sheet</h1>
  </div>


  <!-- Card Top: Project / Month + Actions -->
  <div class="box-2">
    <div class="box-2-inside" style="display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap;">
      <!-- Left: selectors -->
      <div style="display:flex;align-items:center;gap:28px;flex-wrap:wrap;">
        <app-project-selector
          [projects]="projects"
          [selectedProject]="selectedProject"
          [editing]="editing"
          (projectChange)="onProjectChange($event)"
        ></app-project-selector>


        <app-month-selector
          [selectedMonthValue]="selectedMonthValue"
          [editing]="editing"
          (monthChange)="onMonthChange($event)"
          (navigateMonth)="changeMonth($event)"
        >
        </app-month-selector>

      </div>
      <!-- Right: actions -->
      <div style="display:flex;align-items:center;gap:12px;margin-left:auto;">
        <app-button variant="outline" (click)="exportToPDF('portrait')" [disabled]="editing">
          Export PDF
        </app-button>
        <app-button variant="primary" *ngIf="!editing" (click)="editTimesheet()">
          Edit
        </app-button>
        <app-button variant="primary" *ngIf="editing" (click)="saveTimesheet()">
          Save
        </app-button>
      </div>
    </div>

    <!-- Selected Month Display-->
    <h2 class="h2-month">{{selectedMonth}}</h2>
  </div>

  <!-- Time Sheet Table Selection -->
  <div class="box-3">
    <app-timesheet-table
      [daysInMonth]="daysInMonth"
      [timesheetData]="timesheetData"
      [editing]="editing"
      [editingTimesheet]="editingTimesheet"
      [formattedHolidays]="formattedHolidays"

      [isHoliday]="isHoliday.bind(this)"
      [isWeekend]="isWeekend.bind(this)"
      [isToday]="isToday.bind(this)"
      [getDowLabel]="getDowLabel.bind(this)"
      [getTotalHours]="getTotalHours.bind(this)"

      (updateHours)="saveProgress()"
    ></app-timesheet-table>

    <app-holiday-events
      [holidays]="formattedHolidays">
    </app-holiday-events>
  </div>

  <div class="box-4" style="border-top:none;padding-top:10px;">
    <app-signature-section
      managerLabel="Manager Signature">
    </app-signature-section>

  </div>
</div>
</html>
<div id="pdf-export-container" style="display:none;">
  <app-pdf-timesheet
    [selectedMonth]="selectedMonth"
    [currentYear]="currentYear"
    [daysInMonth]="daysInMonth"
    [timesheetData]="timesheetData"
    [isWeekend]="isWeekend.bind(this)"
    [isHoliday]="isHoliday.bind(this)"
    [getTotalHours]="getTotalHours.bind(this)"
  ></app-pdf-timesheet>
</div>
